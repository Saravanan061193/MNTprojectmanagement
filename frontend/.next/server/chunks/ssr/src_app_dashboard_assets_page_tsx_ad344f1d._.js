module.exports=[59130,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(87532),e=a.i(70106);let f=(0,e.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var g=a.i(77156);let h=(0,e.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var i=a.i(35125),j=a.i(44494),k=a.i(20494),l=a.i(81402),m=a.i(92258),n=a.i(33508),o=a.i(84505);let p=(0,e.default)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var q=a.i(19032),r=a.i(46271),s=a.i(62036);function t(){let[a,e]=(0,c.useState)([]),[n,r]=(0,c.useState)(!0),[s,t]=(0,c.useState)({}),[v,w]=(0,c.useState)({}),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)("All Categories"),[D,E]=(0,c.useState)(""),F=async()=>{try{let{data:a}=await q.default.get("/api/assets");e(a)}catch(a){console.error("Failed to fetch assets",a)}finally{r(!1)}};(0,c.useEffect)(()=>{F()},[]);let G=async a=>{if(s[a])return void t(b=>({...b,[a]:!1}));try{if(v[a])return void t(b=>({...b,[a]:!0}));let{data:b}=await q.default.get(`/api/assets/reveal/${a}`),c=b.credentials?.password||b.credentials?.apiKey||"No Secret";w(b=>({...b,[a]:c})),t(b=>({...b,[a]:!0}))}catch(a){console.error("Failed to reveal secret",a),alert("Failed to reveal secret.")}},H=a.filter(a=>{let b="All Categories"===B||a.category===B,c=a.serviceName?.toLowerCase().includes(D.toLowerCase())||a.identifier?.toLowerCase().includes(D.toLowerCase())||a.client?.companyName?.toLowerCase().includes(D.toLowerCase());return b&&c});return(0,b.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-500",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Asset Vault"}),(0,b.jsx)("p",{className:"text-gray-400 mt-1",children:"Securely manage and track technical assets."})]}),(0,b.jsxs)("div",{className:"flex gap-3 overflow-x-auto pb-2 md:pb-0",children:[(0,b.jsxs)("select",{value:B,onChange:a=>C(a.target.value),className:"bg-[#1a1a1a] border border-[#222] text-gray-300 px-4 py-2.5 rounded-xl hover:text-white",children:[(0,b.jsx)("option",{children:"All Categories"}),(0,b.jsx)("option",{children:"Domain"}),(0,b.jsx)("option",{children:"Hosting"}),(0,b.jsx)("option",{children:"Server"}),(0,b.jsx)("option",{children:"Database"}),(0,b.jsx)("option",{children:"Email"}),(0,b.jsx)("option",{children:"Cloudinary"}),(0,b.jsx)("option",{children:"Other"})]}),(0,b.jsxs)("button",{onClick:()=>{if(0===H.length)return alert("No assets to export");let a=H.map(a=>({Client:a.client?.companyName||"N/A",Category:a.category,Service:a.serviceName,Identifier:a.identifier,Username:a.credentials?.username||"N/A",Cost:a.renewalCost||0,Currency:a.currency||"INR",Expiry:a.expiryDate?new Date(a.expiryDate).toLocaleDateString():"Never"})),b=Object.keys(a[0]),c=new Blob([[b.join(","),...a.map(a=>b.map(b=>`"${String(a[b]).replace(/"/g,'""')}"`).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a");d.href=URL.createObjectURL(c),d.setAttribute("download",`assets_export_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(d),d.click(),document.body.removeChild(d)},className:"bg-[#1a1a1a] border border-[#222] text-gray-300 px-4 py-2.5 rounded-xl hover:text-white transition-all flex items-center gap-2",children:[(0,b.jsx)(o.Download,{size:18})," Export"]}),(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)(d.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:18}),(0,b.jsx)("input",{type:"text",placeholder:"Search...",value:D,onChange:a=>E(a.target.value),className:"bg-[#111] border border-[#222] text-white pl-10 pr-4 py-2.5 rounded-xl focus:outline-none w-full md:w-64"})]}),(0,b.jsxs)("button",{onClick:()=>{A(null),y(!0)},className:"bg-blue-600 text-white px-5 py-2.5 rounded-xl font-medium hover:bg-blue-500 shadow-lg flex items-center gap-2",children:[(0,b.jsx)(f,{size:18})," Add Asset"]})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:H.map(a=>{let c=(a=>{switch(a){case"Domain":return j.Globe;case"Server":default:return i.Server;case"Database":return k.Database;case"Cloudinary":return l.Key;case"Email":return m.Mail}})(a.category),d=s[a._id],e=v[a._id]||"••••••••";return(0,b.jsxs)("div",{className:"bg-[#111] border border-[#222] rounded-2xl p-5 hover:border-[#333] transition-all group",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-[#1a1a1a] flex items-center justify-center text-gray-400 group-hover:text-blue-400",children:(0,b.jsx)(c,{size:20})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-white",children:a.serviceName}),(0,b.jsx)("p",{className:"text-xs text-gray-400",children:a.client?.companyName||"Unknown Client"})]})]}),(0,b.jsx)("span",{className:"bg-[#1a1a1a] text-gray-400 px-2 py-1 rounded text-xs border border-[#2a2a2a]",children:a.category})]}),(0,b.jsxs)("div",{className:"space-y-3 bg-[#0a0a0a] rounded-xl p-3 border border-[#1a1a1a]",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Host"}),(0,b.jsx)("span",{className:"text-gray-300 font-mono text-xs truncate max-w-[150px]",children:a.identifier})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Username"}),(0,b.jsx)("span",{className:"text-gray-300 font-mono text-xs",children:a.credentials?.username})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Secret"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:`font-mono text-xs ${d?"text-yellow-400":"text-gray-500"}`,children:d?e:"••••••••"}),(0,b.jsx)("button",{onClick:()=>G(a._id),className:"text-gray-600 hover:text-white",children:d?(0,b.jsx)(h,{size:12}):(0,b.jsx)(g.Eye,{size:12})})]})]})]}),(0,b.jsxs)("div",{className:"mt-4 flex items-center justify-between text-xs text-gray-500",children:[(0,b.jsxs)("span",{children:["Expires: ",a.expiryDate?new Date(a.expiryDate).toLocaleDateString():"N/A"]}),(0,b.jsxs)("button",{onClick:()=>{A(a),y(!0)},className:"flex items-center gap-1 hover:text-blue-400 transition-colors",children:[(0,b.jsx)(p,{size:12})," Edit Details"]})]})]},a._id)})}),(0,b.jsx)(u,{isOpen:x,asset:z,onClose:()=>y(!1),onSuccess:()=>{y(!1),F()}})]})}function u({isOpen:a,asset:d,onClose:e,onSuccess:f}){let[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)({client:"",category:"Domain",serviceName:"",identifier:"",username:"",password:"",expiryDate:"",renewalCost:0,currency:"INR",notes:""});(0,c.useEffect)(()=>{a&&(async()=>{let{data:a}=await q.default.get("/api/clients");h(a),d?l({client:"string"==typeof d.client?d.client:d.client?._id||"",category:d.category,serviceName:d.serviceName,identifier:d.identifier,username:d.credentials?.username||"",password:"••••••••",expiryDate:d.expiryDate?new Date(d.expiryDate).toISOString().split("T")[0]:"",renewalCost:d.renewalCost||0,currency:d.currency||"INR",notes:d.notes||""}):l({client:a.length>0?a[0]._id:"",category:"Domain",serviceName:"",identifier:"",username:"",password:"",expiryDate:"",renewalCost:0,currency:"INR",notes:""})})()},[a,d]);let m=async a=>{a.preventDefault(),j(!0);let b={...k,credentials:{username:k.username,password:k.password}};try{d?._id?await q.default.put(`/api/assets/${d._id}`,b):await q.default.post("/api/assets",b),f()}catch(a){alert("Failed to save: "+(a.response?.data?.msg||a.message))}finally{j(!1)}};return(0,b.jsx)(s.AnimatePresence,{children:a&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:(0,b.jsxs)(r.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"w-full max-w-2xl bg-[#111] border border-[#222] rounded-2xl shadow-2xl overflow-hidden max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-[#222]",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-white",children:d?"Edit Asset":"Add New Asset"}),(0,b.jsx)("button",{onClick:e,className:"text-gray-400 hover:text-white transition-colors",children:(0,b.jsx)(n.X,{size:20})})]}),(0,b.jsxs)("form",{onSubmit:m,className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-300",children:"Client"}),(0,b.jsxs)("select",{required:!0,value:k.client,onChange:a=>l({...k,client:a.target.value}),className:"w-full px-4 py-2 bg-[#1a1a1a] border border-[#333] rounded-xl text-white focus:outline-none focus:border-blue-500/50 transition-all",children:[(0,b.jsx)("option",{value:"",children:"Select Client"}),g.map(a=>(0,b.jsx)("option",{value:a._id,children:a.companyName},a._id))]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-300",children:"Category"}),(0,b.jsxs)("select",{value:k.category,onChange:a=>l({...k,category:a.target.value}),className:"w-full px-4 py-2 bg-[#1a1a1a] border border-[#333] rounded-xl text-white",children:[(0,b.jsx)("option",{value:"Domain",children:"Domain"}),(0,b.jsx)("option",{value:"Hosting",children:"Hosting"}),(0,b.jsx)("option",{value:"Server",children:"Server"}),(0,b.jsx)("option",{value:"Database",children:"Database"}),(0,b.jsx)("option",{value:"Email",children:"Email"}),(0,b.jsx)("option",{value:"Cloudinary",children:"Cloudinary"}),(0,b.jsx)("option",{value:"Other",children:"Other"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-300",children:"Service Name"}),(0,b.jsx)("input",{required:!0,type:"text",value:k.serviceName,onChange:a=>l({...k,serviceName:a.target.value}),className:"w-full px-4 py-2 bg-[#1a1a1a] border border-[#333] rounded-xl text-white"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-300",children:"Identifier (URL/Host)"}),(0,b.jsx)("input",{required:!0,type:"text",value:k.identifier,onChange:a=>l({...k,identifier:a.target.value}),className:"w-full px-4 py-2 bg-[#1a1a1a] border border-[#333] rounded-xl text-white"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-300",children:"Username"}),(0,b.jsx)("input",{type:"text",value:k.username,onChange:a=>l({...k,username:a.target.value}),className:"w-full px-4 py-2 bg-[#1a1a1a] border border-[#333] rounded-xl text-white"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-300",children:"Password / API Key"}),(0,b.jsx)("input",{type:"password",value:k.password,onChange:a=>l({...k,password:a.target.value}),className:"w-full px-4 py-2 bg-[#1a1a1a] border border-[#333] rounded-xl text-white"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-300",children:"Expiry Date"}),(0,b.jsx)("input",{type:"date",value:k.expiryDate,onChange:a=>l({...k,expiryDate:a.target.value}),className:"w-full px-4 py-2 bg-[#1a1a1a] border border-[#333] rounded-xl text-white"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-300",children:"Cost"}),(0,b.jsx)("input",{type:"number",value:k.renewalCost,onChange:a=>l({...k,renewalCost:Number(a.target.value)}),className:"w-full px-4 py-2 bg-[#1a1a1a] border border-[#333] rounded-xl text-white"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-300",children:"Currency"}),(0,b.jsxs)("select",{value:k.currency,onChange:a=>l({...k,currency:a.target.value}),className:"w-full px-4 py-2 bg-[#1a1a1a] border border-[#333] rounded-xl text-white",children:[(0,b.jsx)("option",{value:"INR",children:"INR (₹)"}),(0,b.jsx)("option",{value:"USD",children:"USD ($)"})]})]})]})]}),(0,b.jsxs)("div",{className:"pt-4 flex justify-end gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-300 hover:text-white",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-medium transition-all",children:i?"Saving...":"Save Changes"})]})]})]})})})}a.s(["default",()=>t],59130)}];

//# sourceMappingURL=src_app_dashboard_assets_page_tsx_ad344f1d._.js.map